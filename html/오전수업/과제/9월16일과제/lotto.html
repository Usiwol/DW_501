<!DOCTYPE html>
<html lang="ko">

  <head>
    <meta charset="UTF-8">
    <title>로또 추첨기</title>
    <link rel="stylesheet" type="text/css" href="lotto.css">
    <script>
        window.addEventListener("load", function(){
  var generateBtn = document.querySelector(".generate-btn");
  generateBtn.addEventListener("click", function(){
    generateLottoBalls(6);
  });
});

function generateLottoBalls(size){
  var template = document.querySelector("#lotto-ball-template");
  var lottoBallDiv = template.content.children[0];
  var lottoWrapperDiv = document.querySelector(".lotto-wrapper");
  lottoWrapperDiv.innerHTML = "";
  var lottoNumbers = generateLottoNumbers(6);

  for(var i=0; i < lottoNumbers.length; i++){
    var cloneDiv = document.importNode(lottoBallDiv, true);
    cloneDiv.querySelector(".number").textContent = lottoNumbers[i];
    lottoWrapperDiv.appendChild(cloneDiv);
    moveBall(cloneDiv, i*500); 
  }
}

function moveBall(target, delay){
  setTimeout(function(){
    target.classList.add("active");
  }, delay);
}

function generateLottoNumbers(size){
  var numbers = [];
  for(var i=1; i <= 45; i++) {
    numbers.push(i);
  }

  //shuffle
  for(var i=0; i < numbers.length; i++){
    var j = Math.floor(Math.random() * numbers.length);

    //swap
    var tmp = numbers[i];
    numbers[i] = numbers[j];
    numbers[j] = tmp;
  }

  //slice
  return numbers.slice(0, size);
}



        var usrLotto=[]; //로또 번호 배열 생성
        

        // for(i=1;i<7;i++){
        //     var yourNum=parseInt(prompt("1~45이하의 정수 6번 입력하세요 "+i+"번째 입력입니다."));
        //     usrLotto.push(yourNum); //push로 배열에 각 값 입력
        // }

        for(var i=0; i<6;i++){
            for (var j=0;j<6;j++){
                if(j==i){   //자기자신
                    
                }

                else if(usrLotto[j]!=usrLotto[i]){
                    
                }

                else{
                    while (true){
                        if(usrLotto[j]==usrLotto[i]){
                            usrLotto[j]=parseInt(prompt("중복된 숫자입니다 다시 입력하세요."));
                        }
                        else{
                            break;
                        }
                    }
                }
            }
        }

        usrLotto.sort();//정렬- 문자열기준 정렬
        //function (a, b)
        //사칙연산

        //오름차순 정렬
        usrLotto.sort(function(a,b){return a-b}); //b-a : 내림차순 정렬

        document.write("사용자가 선택한 번호는 [&nbsp");
        for(i=0;i<6;i++){
            if(i<5){
            document.write(usrLotto[i]+"번 /&nbsp");
            }
            else{
                document.write(usrLotto[i]+"번&nbsp");
            }
        }

        document.write("] 입니다.<br>");
        
        var comLotto=[];

        
        for(i=1;i<7;i++){
            var comNum=Math.floor(Math.random()*45+1);
            comLotto.push(comNum);
        }

        //중복확인

        for(var i=0; i<6;i++){
            for (var j=0;j<6;j++){
                if(j==i){   //자기자신
                    
                }

                else if(comLotto[j]!=comLotto[i]){
                    
                }

                else{
                    while (true){
                        if(comLotto[j]==comLotto[i]){
                            comLotto[j]=Math.floor(Math.random()*45+1);
                        }
                        else{
                            break;
                        }
                    }
                }
            }
        }
                   
        comLotto.sort();
        comLotto.sort(function (a,b){return a-b})

        document.write("이번주 로또 당첨 번호는 [&nbsp");

        for(i=0;i<6;i++){
            if(i<5){
            document.write(comLotto[i]+"번 /&nbsp");
            }
            else{
                document.write(comLotto[i]+"번&nbsp");
            }
        }
        document.write("] 입니다.");

        document.write("<br><hr><br>");

        var count=0;

        for(i=0;i<6;i++){
            for(j=0;j<6;j++){
                if(comLotto[i]==usrLotto[j]){
                    count++;
                    document.write("이번주 로또 당첨 번호 중 ["+(i+1)+"번] 이 일치하였습니다.<br>");
                    break;
                }
            }
        }
        
        if(count==0){
            document.write("꽝! 다음기회에.");
        }
        else if(count==6){
            document.write("축하드립니다 ! 당첨되었습니다. ");
        }
        else{
            document.write("축하드립니다! 총"+count+"개 일치하였습니다.");
        }

    </script>
  </head>

  <body>
    <div id="lotto">
        <input type="text">
        <input type="text">
        <input type="text">
        <input type="text">
        <input type="text">
        <input type="text">   
    </div>
    <div class="bt">
        <input type="button" onclick="enroll()" value="선택완료" />
    </div>


    <template id="lotto-ball-template">
        <div class="lotto-ball">
          <div class="number">?</div>
          <div class="shadow"></div>
        </div>
      </template>
      
      <button class="generate-btn">Generate!</button>
      
      <div class="lotto-wrapper"></div>
  </body>

</html>